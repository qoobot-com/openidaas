# MyBatis-Plus统一配置
# 此文件定义了所有使用MyBatis-Plus的模块的持久层配置

mybatis-plus:
  # Mapper XML文件位置
  mapper-locations: classpath*:mapper/**/*.xml
  # 实体类包路径（支持多模块）
  type-aliases-package:
    - com.qoobot.openidaas.core.domain
    - com.qoobot.openidaas.user.domain
    - com.qoobot.openidaas.role.domain
    - com.qoobot.openidaas.organization.domain
    - com.qoobot.openidaas.audit.domain
  # MyBatis配置
  configuration:
    # 下划线转驼峰（自动映射）
    map-underscore-to-camel-case: true
    # 日志实现（使用SLF4J）
    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl
    # 开启二级缓存
    cache-enabled: true
    # 开启延迟加载
    lazy-loading-enabled: false
    # 积极的懒加载（false时按需加载）
    aggressive-lazy-loading: false
    # 允许使用方法参数中的占位符
    default-enum-type-handler: org.apache.ibatis.type.EnumTypeHandler
    # 当返回结果包含null值时，也显示对应的字段名
    call-setters-on-nulls: true
  # 全局配置
  global-config:
    # 是否打印Banner
    banner: false
    # 数据库配置
    db-config:
      # 主键类型（AUTO=数据库自增，INPUT=用户输入，ASSIGN_ID=雪花算法）
      id-type: auto
      # 表名前缀
      table-prefix: ""
      # 逻辑删除字段名
      logic-delete-field: deleted
      # 逻辑删除值
      logic-delete-value: 1
      # 逻辑未删除值
      logic-not-delete-value: 0
      # 乐观锁字段名
      version-field: version
      # 插入时自动填充
      insert-strategy: not_null
      # 更新时自动填充
      update-strategy: not_null
      # SELECT字段策略
      select-strategy: not_empty

# 日志配置（SQL输出）
logging:
  level:
    # MyBatis-Plus SQL日志（开发环境DEBUG，生产环境WARN）
    com.qoobot.openidaas.*.mapper: ${SQL_LOG_LEVEL:DEBUG}
    # MyBatis配置日志
    com.baomidou.mybatisplus: ${MYBATIS_LOG_LEVEL:INFO}
