# æœ€ç»ˆéªŒè¯æ£€æŸ¥æ¸…å•

## âœ… åŠŸèƒ½å®Œå–„åº¦æ£€æŸ¥

### 1. AuditStatistics ç»„ä»¶ - ç»Ÿè®¡åˆ†æé¡µé¢å®Œå–„

- [x] è¿æ¥çœŸå® API (`auditApi.getStatistics`)
- [x] æ·»åŠ æ“ä½œè¶‹åŠ¿å›¾è¡¨ï¼ˆæœ€è¿‘7å¤©ï¼‰
- [x] æ·»åŠ å¤±è´¥ç‡è¶‹åŠ¿å›¾è¡¨
- [x] å®Œå–„çƒ­é—¨ç”¨æˆ· TOP10 åˆ—è¡¨
- [x] ä½¿ç”¨ ResizeObserver ä¼˜åŒ–å›¾è¡¨å¤§å°è°ƒæ•´
- [x] ä¼˜åŒ–å›¾è¡¨æ ·å¼å’Œäº¤äº’

**ç›¸å…³æ–‡ä»¶**: `src/modules/audit/AuditStatistics.vue`

---

### 2. å•å…ƒæµ‹è¯• - æ·»åŠ å…³é”®ç»„ä»¶å’Œ Hook çš„å•å…ƒæµ‹è¯•

- [x] `useMessage` Composable æµ‹è¯•
- [x] `useConfirm` Composable æµ‹è¯•
- [x] `GlobalEmpty` ç»„ä»¶æµ‹è¯•
- [x] `GlobalLoading` ç»„ä»¶æµ‹è¯•
- [x] `useAuthStore` Store æµ‹è¯•ï¼ˆæ‰©å±•ï¼‰
- [x] è·¯ç”±æµ‹è¯•
- [x] æ€§èƒ½æµ‹è¯•ï¼ˆUserListã€VirtualTableï¼‰

**ç›¸å…³æ–‡ä»¶**:
- `tests/composables/useMessage.test.ts`
- `tests/composables/useConfirm.test.ts`
- `tests/components/GlobalEmpty.test.ts`
- `tests/components/GlobalLoading.test.ts`
- `tests/stores/auth-extended.test.ts`
- `tests/router/router.test.ts`
- `tests/performance/user-list-performance.test.ts`
- `tests/performance/virtual-scroll.test.ts`

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:unit          # è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
npm run test:unit:coverage # æŸ¥çœ‹è¦†ç›–ç‡
npm run test:performance   # è¿è¡Œæ€§èƒ½æµ‹è¯•
```

---

### 3. E2E æµ‹è¯• - æ·»åŠ å…³é”®ä¸šåŠ¡æµç¨‹çš„ç«¯åˆ°ç«¯æµ‹è¯•

- [x] è®¤è¯æµç¨‹æµ‹è¯• (`auth.cy.ts`)
- [x] å›½é™…åŒ–æµ‹è¯• (`i18n.cy.ts`)
- [x] å¯¼èˆªæµ‹è¯• (`navigation.cy.ts`)
- [x] ç»„ç»‡ç®¡ç†æµ‹è¯• (`organization-management.cy.ts`)
- [x] è§’è‰²ç®¡ç†æµ‹è¯• (`role-management.cy.ts`)
- [x] ç”¨æˆ·ç®¡ç†æµ‹è¯• (`user-management.cy.ts`)

**ç›¸å…³æ–‡ä»¶**: `cypress/e2e/`

**è¿è¡Œå‘½ä»¤**:
```bash
npm run test:e2e           # è¿è¡Œæ‰€æœ‰ E2E æµ‹è¯•
npm run test:e2e:open      # æ‰“å¼€ Cypress UI
npm run test:e2e:chrome    # ä½¿ç”¨ Chrome è¿è¡Œ
```

---

### 4. å›½é™…åŒ–å®Œå–„ - è¡¥å……å¤šè¯­è¨€æ”¯æŒ

- [x] æ·»åŠ ä¸»é¢˜ç›¸å…³ç¿»è¯‘
- [x] æ·»åŠ å®¡è®¡ç»Ÿè®¡ç›¸å…³ç¿»è¯‘
- [x] æ·»åŠ é”™è¯¯é¡µé¢ç›¸å…³ç¿»è¯‘
- [x] æ·»åŠ ç©ºçŠ¶æ€ç›¸å…³ç¿»è¯‘
- [x] æ”¯æŒç®€ä½“ä¸­æ–‡ (zh-CN)
- [x] æ”¯æŒè‹±è¯­ (en-US)

**ç›¸å…³æ–‡ä»¶**:
- `src/locales/zh-CN.ts`
- `src/locales/en-US.ts`

---

### 5. æš—è‰²ä¸»é¢˜ - æ·»åŠ æš—è‰²æ¨¡å¼æ”¯æŒ

- [x] åˆ›å»ºæš—è‰²ä¸»é¢˜æ ·å¼æ–‡ä»¶
- [x] åˆ›å»ºä¸»é¢˜ Store (useThemeStore)
- [x] åˆ›å»ºä¸»é¢˜åˆ‡æ¢ç»„ä»¶ (ThemeSwitcher)
- [x] æ”¯æŒæµ…è‰²/æ·±è‰²/è‡ªåŠ¨ä¸‰ç§æ¨¡å¼
- [x] è‡ªåŠ¨è·Ÿéšç³»ç»Ÿä¸»é¢˜
- [x] åœ¨ main.ts ä¸­é›†æˆä¸»é¢˜åˆå§‹åŒ–

**ç›¸å…³æ–‡ä»¶**:
- `src/styles/dark-theme.scss`
- `src/stores/theme.ts`
- `src/components/ThemeSwitcher.vue`
- `src/main.ts`

---

## âœ… é…ç½®å’Œæ€§èƒ½æ£€æŸ¥

### 6. æ£€æŸ¥ API æ¥å£åœ°å€é…ç½®

**ç¯å¢ƒå˜é‡é…ç½®**:

- [x] `.env.development` - å¼€å‘ç¯å¢ƒé…ç½®
  - API åœ°å€: `http://localhost:8080`
  - ç«¯å£: `3000`

- [x] `.env.production` - ç”Ÿäº§ç¯å¢ƒé…ç½®
  - API åœ°å€: `https://api.idaas.example.com`
  - ç«¯å£: `80`

**éªŒè¯è„šæœ¬**: `scripts/verify-api-config.js`

**è¿è¡Œå‘½ä»¤**:
```bash
npm run verify:api
```

**æ£€æŸ¥é¡¹**:
- [ ] æ‰€æœ‰ API ç«¯ç‚¹ä»¥ `/api` å¼€å¤´
- [ ] DELETE æ–¹æ³•ä½¿ç”¨è·¯å¾„å‚æ•°
- [ ] æ— é‡å¤çš„ç«¯ç‚¹å®šä¹‰
- [ ] URL ä¸­æ— å¤šä½™çš„åæ–œæ 

---

### 7. éªŒè¯æ‰“åŒ…æ–‡ä»¶å¤§å°

**åˆ†æè„šæœ¬**: `scripts/bundle-size-analyzer.js`

**è¿è¡Œå‘½ä»¤**:
```bash
npm run build
npm run analyze:bundle
```

**ç›®æ ‡æŒ‡æ ‡**:
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®æµ‹å€¼ |
|------|--------|--------|
| JavaScript æ€»å¤§å° (gzip) | < 2MB | |
| å•ä¸ª JS æ–‡ä»¶ (gzip) | < 500KB | |
| CSS æ€»å¤§å° (gzip) | < 200KB | |
| é¦–å±åŠ è½½èµ„æº | < 500KB | |

**ä¼˜åŒ–æªæ–½**:
- [x] ä»£ç åˆ†å‰²ï¼ˆæŒ‰æ¨¡å—ã€APIã€ç»„ä»¶åˆ†åŒ…ï¼‰
- [x] æŒ‰éœ€å¯¼å…¥ Element Plus
- [x] è·¯ç”±æ‡’åŠ è½½
- [x] Gzip å‹ç¼©

---

### 8. æµ‹è¯•é¦–å±åŠ è½½æ€§èƒ½

**æ€§èƒ½æŒ‡æ ‡ç›®æ ‡**:

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹æ³• |
|------|--------|----------|
| FCP (First Contentful Paint) | < 1.0s | Lighthouse / DevTools |
| LCP (Largest Contentful Paint) | < 2.5s | Lighthouse / DevTools |
| TTI (Time to Interactive) | < 3.8s | Lighthouse / DevTools |
| TBT (Total Blocking Time) | < 200ms | Lighthouse / DevTools |
| CLS (Cumulative Layout Shift) | < 0.1 | Lighthouse / DevTools |
| FID (First Input Delay) | < 100ms | Lighthouse / DevTools |

**æµ‹è¯•æ–¹æ³•**:

1. **Lighthouse æµ‹è¯•**:
```bash
npm run dev
# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ
lighthouse http://localhost:3000 --view
```

2. **Chrome DevTools Performance**:
   - æ‰“å¼€ DevTools (F12)
   - åˆ‡æ¢åˆ° Performance é¢æ¿
   - å¼€å§‹å½•åˆ¶ â†’ åˆ·æ–°é¡µé¢ â†’ åœæ­¢å½•åˆ¶
   - åˆ†æ FCPã€LCPã€TTI ç­‰æŒ‡æ ‡

3. **WebPageTest**:
   - è®¿é—® https://www.webpagetest.org
   - è¾“å…¥æµ‹è¯• URL è¿›è¡Œåˆ†æ

**è¯¦ç»†æŒ‡å—**: `docs/PERFORMANCE_TESTING_GUIDE.md`

---

### 9. æµ‹è¯•å¤§æ•°æ®é‡åˆ—è¡¨æ€§èƒ½

**æµ‹è¯•ç›®æ ‡**:

| åœºæ™¯ | æ•°æ®é‡ | ç›®æ ‡ FPS | å†…å­˜é™åˆ¶ |
|------|--------|----------|----------|
| ç”¨æˆ·åˆ—è¡¨æ¸²æŸ“ | 10,000 | > 30 | < 200MB |
| ç”¨æˆ·åˆ—è¡¨æ»šåŠ¨ | 10,000 | > 30 | ç¨³å®š |
| è™šæ‹Ÿè¡¨æ ¼æ¸²æŸ“ | 100,000 | > 30 | < 300MB |
| è™šæ‹Ÿè¡¨æ ¼æ»šåŠ¨ | 100,000 | > 30 | ç¨³å®š |

**æµ‹è¯•å‘½ä»¤**:
```bash
npm run test:performance
```

**æµ‹è¯•æ–‡ä»¶**:
- `tests/performance/user-list-performance.test.ts`
- `tests/performance/virtual-scroll.test.ts`

**ä¼˜åŒ–æªæ–½**:
- [x] ä½¿ç”¨ VirtualTable ç»„ä»¶å®ç°è™šæ‹Ÿæ»šåŠ¨
- [x] åˆ†é¡µåŠ è½½æ•°æ®
- [x] é˜²æŠ–/èŠ‚æµä¼˜åŒ–äº‹ä»¶å¤„ç†
- [x] é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“

---

### 10. éªŒè¯æ‰€æœ‰è·¯ç”±è·³è½¬æ­£å¸¸

**è·¯ç”±æ¸…å•**:

| è·¯ç”±è·¯å¾„ | é¡µé¢åç§° | çŠ¶æ€ |
|----------|----------|------|
| `/login` | ç™»å½•é¡µ | |
| `/dashboard` | é¦–é¡µ | |
| `/user/list` | ç”¨æˆ·åˆ—è¡¨ | |
| `/user/detail/:id` | ç”¨æˆ·è¯¦æƒ… | |
| `/organization/departments` | éƒ¨é—¨ç®¡ç† | |
| `/organization/positions` | èŒä½ç®¡ç† | |
| `/role/list` | è§’è‰²åˆ—è¡¨ | |
| `/permission/tree` | æƒé™ç®¡ç† | |
| `/application/list` | åº”ç”¨åˆ—è¡¨ | |
| `/audit/statistics` | å®¡è®¡ç»Ÿè®¡ | |
| `/audit/log/list` | æ“ä½œæ—¥å¿— | |
| `/audit/security-events` | å®‰å…¨äº‹ä»¶ | |
| `/profile` | ä¸ªäººä¸­å¿ƒ | |
| `/404` | 404 é¡µé¢ | |

**æµ‹è¯•æ–¹æ³•**:
1. æ‰‹åŠ¨æµ‹è¯•æ‰€æœ‰è·¯ç”±
2. è¿è¡Œ E2E æµ‹è¯•: `npm run test:e2e`
3. æ£€æŸ¥è·¯ç”±å•å…ƒæµ‹è¯•: `tests/router/router.test.ts`

**æ£€æŸ¥é¡¹**:
- [ ] æ‰€æœ‰è·¯ç”±èƒ½æ­£å¸¸è®¿é—®
- [ ] è·¯ç”±å‚æ•°æ­£ç¡®ä¼ é€’
- [ ] è·¯ç”±å®ˆå«æ­£å¸¸å·¥ä½œ
- [ ] æœªåŒ¹é…çš„è·¯ç”±æ˜¾ç¤º 404 é¡µé¢

---

### 11. æ£€æŸ¥é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„

**é”™è¯¯ç±»å‹**:

| é”™è¯¯ç±»å‹ | å¤„ç†æ–¹å¼ | çŠ¶æ€ |
|----------|----------|------|
| ç½‘ç»œé”™è¯¯ | æ˜¾ç¤ºç½‘ç»œé”™è¯¯æç¤ºï¼Œæä¾›é‡è¯•æŒ‰é’® | |
| æœåŠ¡å™¨é”™è¯¯ (500) | æ˜¾ç¤ºæœåŠ¡å™¨é”™è¯¯æç¤ºï¼Œæä¾›é‡è¯•æŒ‰é’® | |
| æœªæˆæƒ (401) | è·³è½¬åˆ°ç™»å½•é¡µ | |
| ç¦æ­¢è®¿é—® (403) | æ˜¾ç¤ºæƒé™é”™è¯¯æç¤º | |
| æœªæ‰¾åˆ° (404) | æ˜¾ç¤º 404 é¡µé¢ | |
| è¯·æ±‚è¶…æ—¶ | æ˜¾ç¤ºè¶…æ—¶æç¤ºï¼Œæä¾›é‡è¯•æŒ‰é’® | |
| å‚æ•°é”™è¯¯ (400) | æ˜¾ç¤ºå‚æ•°é”™è¯¯æç¤º | |

**æµ‹è¯•æ–‡ä»¶**:
- `tests/api/error-handling.test.ts` (å¾…åˆ›å»º)
- `tests/components/GlobalError.test.ts`

**æ£€æŸ¥ç‚¹**:
- [ ] HTTP æ‹¦æˆªå™¨æ­£ç¡®å¤„ç†å„ç§é”™è¯¯ç 
- [ ] GlobalError ç»„ä»¶æ­£ç¡®æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- [ ] é”™è¯¯æç¤ºæ–‡æ¡ˆæ”¯æŒå›½é™…åŒ–
- [ ] 401 é”™è¯¯è‡ªåŠ¨è·³è½¬ç™»å½•é¡µ
- [ ] 403 é”™è¯¯æ˜¾ç¤ºæƒé™æç¤º
- [ ] ç½‘ç»œé”™è¯¯æä¾›é‡è¯•æŒ‰é’®

---

## ğŸ“‹ æœ€ç»ˆéªŒè¯æ­¥éª¤

### æ­¥éª¤ 1: ä»£ç è´¨é‡æ£€æŸ¥

```bash
# è¿è¡Œ Lint æ£€æŸ¥
npm run lint

# è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
npm run build
```

### æ­¥éª¤ 2: å•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
npm run test:unit

# æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
npm run test:unit:coverage
```

### æ­¥éª¤ 3: æ€§èƒ½æµ‹è¯•

```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•
npm run test:performance
```

### æ­¥éª¤ 4: API é…ç½®éªŒè¯

```bash
# éªŒè¯ API é…ç½®
npm run verify:api
```

### æ­¥éª¤ 5: æ‰“åŒ…å’Œ Bundle åˆ†æ

```bash
# æ‰“åŒ…é¡¹ç›®
npm run build

# åˆ†æ Bundle å¤§å°
npm run analyze:bundle
```

### æ­¥éª¤ 6: æ€§èƒ½åŸºå‡†æµ‹è¯•

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ Lighthouse
lighthouse http://localhost:3000 --view
```

### æ­¥éª¤ 7: E2E æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰ E2E æµ‹è¯•
npm run test:e2e

# æˆ–ä½¿ç”¨ Cypress UI è¿›è¡Œäº¤äº’å¼æµ‹è¯•
npm run test:e2e:open
```

### æ­¥éª¤ 8: æ‰‹åŠ¨åŠŸèƒ½éªŒè¯

- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] é¦–é¡µæ˜¾ç¤ºæ­£å¸¸
- [ ] ç”¨æˆ·åˆ—è¡¨ CRUD æ“ä½œæ­£å¸¸
- [ ] éƒ¨é—¨ç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] è§’è‰²ç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] æƒé™ç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] å®¡è®¡ç»Ÿè®¡é¡µé¢æ­£å¸¸
- [ ] ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] è¯­è¨€åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰è·¯ç”±è·³è½¬æ­£å¸¸
- [ ] é”™è¯¯å¤„ç†æ­£ç¡®

---

## ğŸ“Š éªŒè¯æŠ¥å‘Šæ¨¡æ¿

### æµ‹è¯•ç»“æœæ‘˜è¦

| æ£€æŸ¥é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|
| AuditStatistics ç»„ä»¶ | âœ… | å·²å®Œå–„ |
| å•å…ƒæµ‹è¯• | âœ… | è¦†ç›–ç‡: XX% |
| E2E æµ‹è¯• | âœ… | XX/XX é€šè¿‡ |
| å›½é™…åŒ– | âœ… | zh-CN, en-US |
| æš—è‰²ä¸»é¢˜ | âœ… | æµ…è‰²/æ·±è‰²/è‡ªåŠ¨ |
| API é…ç½® | âœ… | æ— é”™è¯¯ |
| æ‰“åŒ…å¤§å° | âœ… | JS: XX MB (gzip: XX KB) |
| é¦–å±æ€§èƒ½ | âœ… | FCP: X.XXs, LCP: X.XXs, TTI: X.XXs |
| å¤§æ•°æ®æ€§èƒ½ | âœ… | 10K items: XX FPS |
| è·¯ç”±è·³è½¬ | âœ… | XX/XX æ­£å¸¸ |
| é”™è¯¯å¤„ç† | âœ… | XX ç§é”™è¯¯ç±»å‹å·²å¤„ç† |

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®æµ‹å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| FCP | < 1.0s | | |
| LCP | < 2.5s | | |
| TTI | < 3.8s | | |
| TBT | < 200ms | | |
| CLS | < 0.1 | | |
| FID | < 100ms | | |
| Bundle Size (gzip) | < 500KB | | |

### Bug åˆ—è¡¨

| ID | æè¿° | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|----|------|--------|------|
| | | | |

### å¾…ä¼˜åŒ–é¡¹

| ID | æè¿° | ä¼˜å…ˆçº§ |
|----|------|--------|
| | | |

---

## ğŸ¯ æ€»ä½“è¯„ä¼°

- **åŠŸèƒ½å®Œæˆåº¦**: XX%
- **æµ‹è¯•è¦†ç›–ç‡**: XX%
- **æ€§èƒ½è¾¾æ ‡ç‡**: XX%
- **æ–‡æ¡£å®Œæ•´åº¦**: XX%

**æ€»ä½“è¯„åˆ†**: â­â­â­â­â­ (X/5)

---

## ğŸ“ å¤‡æ³¨

- æ‰€æœ‰éªŒè¯æ­¥éª¤å®Œæˆåï¼Œè¯·æ›´æ–°æœ¬æ–‡æ¡£ä¸­çš„å®æµ‹å€¼
- å¦‚å‘ç°é—®é¢˜ï¼Œè¯·åœ¨ Bug åˆ—è¡¨ä¸­è®°å½•å¹¶è¿½è¸ª
- æµ‹è¯•æŠ¥å‘Šåº”å½’æ¡£ä¿å­˜
