# OpenIDaaS 环境变量配置示例
# 复制此文件为 .env 并填写实际值
# 请勿将 .env 文件提交到代码仓库

# ============================================
# 数据库配置
# ============================================
# 数据库连接 URL
DB_URL=jdbc:mysql://localhost:3306/open_idaas?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&serverTimezone=GMT%2B8&allowPublicKeyRetrieval=true
# 数据库用户名
DB_USERNAME=root
# 数据库密码（必填，建议使用强密码）
DB_PASSWORD=your_secure_password_here

# ============================================
# HikariCP 连接池配置
# ============================================
# 连接池最大连接数（建议根据 CPU 核心数计算：core_count * 2 + effective_spindle_count）
HIKARI_MAX_POOL_SIZE=20
# 连接池最小空闲连接数
HIKARI_MIN_IDLE=5
# 连接超时时间（毫秒）
HIKARI_CONNECTION_TIMEOUT=30000
# 空闲连接超时时间（毫秒）
HIKARI_IDLE_TIMEOUT=600000
# 连接最大生命周期（毫秒）
HIKARI_MAX_LIFETIME=1800000
# 连接验证超时时间（毫秒）
HIKARI_VALIDATION_TIMEOUT=5000
# 连接泄漏检测阈值（毫秒）
HIKARI_LEAK_DETECTION_THRESHOLD=60000
# 连接池名称
HIKARI_POOL_NAME=OpenIDaSHikariCP
# 事务隔离级别 (READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE)
HIKARI_TRANSACTION_ISOLATION=TRANSACTION_READ_COMMITTED

# ============================================
# Redis 配置
# ============================================
# Redis 主机地址
REDIS_HOST=localhost
# Redis 端口
REDIS_PORT=6379
# Redis 密码（如无密码可留空）
REDIS_PASSWORD=
# Redis 数据库索引
REDIS_DB=0
# Redis 超时时间
REDIS_TIMEOUT=2000ms
# Redis 连接池最大连接数
REDIS_POOL_MAX_ACTIVE=20
# Redis 连接池最大空闲连接数
REDIS_POOL_MAX_IDLE=10
# Redis 连接池最小空闲连接数
REDIS_POOL_MIN_IDLE=2
# Redis 连接池最大等待时间
REDIS_POOL_MAX_WAIT=-1ms

# ============================================
# JWT 配置
# ============================================
# JWT 密钥（必填，建议使用至少 32 字符的随机字符串）
JWT_SECRET=your_jwt_secret_key_at_least_32_characters_long
# Token 有效期（秒）
JWT_EXPIRATION=3600
# 刷新 Token 有效期（秒）
JWT_REFRESH_EXPIRATION=86400
# JWT 签发者
JWT_ISSUER=OpenIDaaS

# ============================================
# OAuth2 配置
# ============================================
# OAuth2 签发者 URL
OAUTH2_ISSUER=http://localhost:8082/auth

# ============================================
# CORS 配置
# ============================================
# 允许的跨域来源（多个用逗号分隔，生产环境请限制）
CORS_ALLOWED_ORIGINS=*
# 允许的 HTTP 方法
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
# 允许的请求头
CORS_ALLOWED_HEADERS=*
# 是否允许携带凭证
CORS_ALLOW_CREDENTIALS=true

# ============================================
# Nacos 配置
# ============================================
# Nacos 服务器地址
NACOS_SERVER_ADDR=localhost:8848
# Nacos 命名空间
NACOS_NAMESPACE=public
# Nacos 分组
NACOS_GROUP=DEFAULT_GROUP
# Nacos 用户名
NACOS_USERNAME=nacos
# Nacos 密码
NACOS_PASSWORD=nacos
# Nacos 集群名称
NACOS_CLUSTER=default


# ============================================
# Sentinel 配置
# ============================================
# Sentinel Dashboard 地址
SENTINEL_DASHBOARD=localhost:8858
# Sentinel 客户端 IP（可选）
SENTINEL_CLIENT_IP=
# Sentinel 端口
SENTINEL_PORT=8719

# ============================================
# Kafka 配置
# ============================================
# Kafka 服务器地址（多个用逗号分隔）
KAFKA_SERVERS=localhost:9092
# Kafka 主题前缀
KAFKA_TOPIC_PREFIX=openidaas

# ============================================
# 社交登录配置
# ============================================
# GitHub OAuth2
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# Google OIDC
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# 微信 OAuth2
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret

# Microsoft OIDC
MICROSOFT_CLIENT_ID=your_microsoft_client_id
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret

# ============================================
# 日志配置
# ============================================
# 日志级别 (TRACE, DEBUG, INFO, WARN, ERROR)
LOGGING_LEVEL=INFO
# 日志文件路径
LOGGING_FILE_PATH=/var/log/openidaas
# 日志文件最大大小
LOGGING_FILE_MAX_SIZE=100MB
# 日志文件保留天数
LOGGING_FILE_MAX_HISTORY=30
# 日志文件总大小限制
LOGGING_FILE_TOTAL_SIZE_CAP=1GB

# ============================================
# 应用配置
# ============================================
# 应用名称
APP_NAME=openidaas
# 应用环境 (dev, test, prod)
SPRING_PROFILES_ACTIVE=dev
# 应用端口（各服务不同）
SERVER_PORT=8080
