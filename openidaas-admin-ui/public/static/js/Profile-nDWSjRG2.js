import{u as H,_ as J}from"./index-MeEtieb6.js";import{E as c}from"./element-plus-CD8Xv7xU.js";import{v as K,k as O,ac as s,y as f,D as V,E as e,F as a,G as u,S as i,U as _,M as D,a6 as Y,z as M,r as C,l as T}from"./vue-vendor-BojGzKWy.js";import"./axios-C0Zqfgkc.js";const Q={class:"profile-container"},R={class:"user-info"},W={class:"user-role"},X={class:"user-stats"},Z={class:"stat-item"},$={class:"stat-value"},h=K({__name:"Profile",setup(ee){const B=H(),v=C("basic"),d=C({username:"",fullName:"",email:"",mobile:"",avatar:"",roles:[],permissions:[],lastLoginTime:""}),t=T({username:"",fullName:"",email:"",mobile:"",gender:0,birthDate:""}),n=T({oldPassword:"",newPassword:"",confirmPassword:""}),E=()=>{const m=B.userInfo;m&&(d.value={username:m.username,fullName:m.fullName||"",email:"",mobile:"",avatar:m.avatar||"",roles:m.roles||[],permissions:m.permissions||[],lastLoginTime:""},t.username=m.username,t.fullName=m.fullName||"")},F=()=>{c.success("个人信息更新成功")},I=()=>{if(n.newPassword!==n.confirmPassword){c.error("两次输入的密码不一致");return}if(n.newPassword.length<6){c.error("密码长度不能少于6位");return}c.success("密码修改成功"),n.oldPassword="",n.newPassword="",n.confirmPassword=""};return O(()=>{E()}),(m,l)=>{const L=s("el-avatar"),S=s("el-card"),g=s("el-col"),p=s("el-input"),r=s("el-form-item"),b=s("el-radio"),A=s("el-radio-group"),z=s("el-date-picker"),P=s("el-button"),y=s("el-form"),w=s("el-tab-pane"),N=s("el-tag"),U=s("el-descriptions-item"),j=s("el-descriptions"),G=s("el-tabs"),q=s("el-row");return f(),V("div",Q,[e(q,{gutter:20},{default:a(()=>[e(g,{span:8},{default:a(()=>[e(S,null,{default:a(()=>{var o;return[u("div",R,[e(L,{size:100,src:d.value.avatar},{default:a(()=>{var k,x;return[i(_(((k=d.value.fullName)==null?void 0:k.charAt(0))||((x=d.value.username)==null?void 0:x.charAt(0))),1)]}),_:1},8,["src"]),u("h3",null,_(d.value.fullName||d.value.username),1),u("p",W,_((o=d.value.roles)==null?void 0:o.join(", ")),1),u("div",X,[l[11]||(l[11]=u("div",{class:"stat-item"},[u("span",{class:"stat-label"},"登录次数"),u("span",{class:"stat-value"},"256")],-1)),u("div",Z,[l[10]||(l[10]=u("span",{class:"stat-label"},"最后登录",-1)),u("span",$,_(d.value.lastLoginTime||"2024-01-15 14:30:25"),1)])])])]}),_:1})]),_:1}),e(g,{span:16},{default:a(()=>[e(G,{modelValue:v.value,"onUpdate:modelValue":l[9]||(l[9]=o=>v.value=o)},{default:a(()=>[e(w,{label:"基本信息",name:"basic"},{default:a(()=>[e(y,{model:t,"label-width":"100px"},{default:a(()=>[e(r,{label:"用户名"},{default:a(()=>[e(p,{modelValue:t.username,"onUpdate:modelValue":l[0]||(l[0]=o=>t.username=o),disabled:""},null,8,["modelValue"])]),_:1}),e(r,{label:"姓名"},{default:a(()=>[e(p,{modelValue:t.fullName,"onUpdate:modelValue":l[1]||(l[1]=o=>t.fullName=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"邮箱"},{default:a(()=>[e(p,{modelValue:t.email,"onUpdate:modelValue":l[2]||(l[2]=o=>t.email=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"手机号"},{default:a(()=>[e(p,{modelValue:t.mobile,"onUpdate:modelValue":l[3]||(l[3]=o=>t.mobile=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"性别"},{default:a(()=>[e(A,{modelValue:t.gender,"onUpdate:modelValue":l[4]||(l[4]=o=>t.gender=o)},{default:a(()=>[e(b,{label:1},{default:a(()=>[...l[12]||(l[12]=[i("男",-1)])]),_:1}),e(b,{label:2},{default:a(()=>[...l[13]||(l[13]=[i("女",-1)])]),_:1}),e(b,{label:0},{default:a(()=>[...l[14]||(l[14]=[i("保密",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"生日"},{default:a(()=>[e(z,{modelValue:t.birthDate,"onUpdate:modelValue":l[5]||(l[5]=o=>t.birthDate=o),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(P,{type:"primary",onClick:F},{default:a(()=>[...l[15]||(l[15]=[i("保存",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(w,{label:"安全设置",name:"security"},{default:a(()=>[e(y,{model:n,"label-width":"120px"},{default:a(()=>[e(r,{label:"当前密码"},{default:a(()=>[e(p,{modelValue:n.oldPassword,"onUpdate:modelValue":l[6]||(l[6]=o=>n.oldPassword=o),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(r,{label:"新密码"},{default:a(()=>[e(p,{modelValue:n.newPassword,"onUpdate:modelValue":l[7]||(l[7]=o=>n.newPassword=o),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(r,{label:"确认新密码"},{default:a(()=>[e(p,{modelValue:n.confirmPassword,"onUpdate:modelValue":l[8]||(l[8]=o=>n.confirmPassword=o),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(P,{type:"primary",onClick:I},{default:a(()=>[...l[16]||(l[16]=[i("修改密码",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(w,{label:"权限信息",name:"permissions"},{default:a(()=>[e(j,{column:1,border:""},{default:a(()=>[e(U,{label:"拥有角色"},{default:a(()=>[(f(!0),V(D,null,Y(d.value.roles,o=>(f(),M(N,{key:o,style:{"margin-right":"10px"}},{default:a(()=>[i(_(o),1)]),_:2},1024))),128))]),_:1}),e(U,{label:"权限列表"},{default:a(()=>[(f(!0),V(D,null,Y(d.value.permissions,o=>(f(),M(N,{key:o,type:"success",style:{"margin-right":"10px","margin-bottom":"5px"}},{default:a(()=>[i(_(o),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}}),te=J(h,[["__scopeId","data-v-4f6a2759"]]);export{te as default};
