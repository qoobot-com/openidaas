import{aw as y,r as o}from"./vue-vendor-BojGzKWy.js";import{s as n}from"./index-MeEtieb6.js";const i={getUsers:a=>n.get("/api/users",{params:a}),createUser:a=>n.post("/api/users",a),getUserById:a=>n.get(`/api/users/${a}`),updateUser:(a,s)=>n.put(`/api/users/${a}`,s),deleteUser:a=>n.delete(`/api/users/${a}`),assignDepartment:(a,s)=>n.post(`/api/users/${a}/departments`,s),assignRole:(a,s)=>n.post(`/api/users/${a}/roles`,s)},x=y("user",()=>{const a=o([]),s=o(null),r=o(!1),l=o({page:0,size:20,total:0,totalPages:0}),p=async(e={})=>{try{r.value=!0;const t=await i.getUsers({page:l.value.page,size:l.value.size,...e});return a.value=t.content,l.value.total=t.totalElements,l.value.totalPages=t.totalPages,t}finally{r.value=!1}},v=async e=>{try{r.value=!0;const t=await i.getUserById(e);return s.value=t,t}finally{r.value=!1}};return{userList:a,currentUser:s,loading:r,pagination:l,fetchUsers:p,getUserById:v,createUser:async e=>{try{r.value=!0;const t=await i.createUser(e);return l.value.page===0&&await p(),t}finally{r.value=!1}},updateUser:async(e,t)=>{var u;try{r.value=!0;const c=await i.updateUser(e,t),g=a.value.findIndex(f=>f.id===e);return g!==-1&&(a.value[g]=c),((u=s.value)==null?void 0:u.id)===e&&(s.value={...s.value,...c}),c}finally{r.value=!1}},deleteUser:async e=>{var t;try{return r.value=!0,await i.deleteUser(e),a.value=a.value.filter(u=>u.id!==e),((t=s.value)==null?void 0:t.id)===e&&(s.value=null),!0}finally{r.value=!1}},assignDepartment:async(e,t)=>{var u;try{return r.value=!0,await i.assignDepartment(e,t),((u=s.value)==null?void 0:u.id)===e&&await v(e),!0}finally{r.value=!1}},assignRole:async(e,t)=>{var u;try{return r.value=!0,await i.assignRole(e,t),((u=s.value)==null?void 0:u.id)===e&&await v(e),!0}finally{r.value=!1}},setPage:e=>{l.value.page=e},setSize:e=>{l.value.size=e},resetPagination:()=>{l.value.page=0,l.value.size=20,l.value.total=0,l.value.totalPages=0}}});export{x as u};
